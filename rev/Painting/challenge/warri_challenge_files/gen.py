import random

ss = """
[ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ]
[ ? ][   ][ 1 ][ 0 ][   ][   ][ 2 ][   ][   ][ ? ][   ][?3?][   ][   ][|3|][   ][|3|][   ][   ][|3|][   ][   ][   ][<?>][   ][   ][ ? ]
[ ? ][ ? ][ 3 ][ 2 ][   ][ 2 ][   ][   ][ 2 ][   ][   ][   ][ ? ][   ][   ][   ][   ][   ][ ? ][   ][   ][   ][   ][   ][   ][<3>][ ? ]
[ ? ][   ][   ][   ][   ][   ][   ][   ][   ][   ][|2|][   ][   ][   ][   ][ 3 ][   ][   ][   ][|3|][   ][   ][   ][   ][   ][   ][ ? ]
[ ? ][   ][ 5 ][ ? ][ 4 ][   ][ 3 ][   ][ 1 ][   ][   ][   ][ 3 ][   ][   ][   ][   ][ 1 ][   ][   ][   ][   ][ 0 ][   ][?2?][   ][ ? ]
[ ? ][   ][   ][ 1 ][ 2 ][   ][   ][   ][   ][   ][ 2 ][   ][   ][   ][ ? ][ ? ][   ][   ][   ][<2>][   ][   ][   ][   ][|3|][   ][ ? ]
[ ? ][   ][   ][ 2 ][ 3 ][   ][   ][ 4 ][   ][   ][   ][   ][ 7 ][   ][ ? ][   ][ 4 ][ ? ][   ][   ][   ][?4?][   ][   ][   ][   ][ ? ]
[ ? ][ 2 ][   ][ 1 ][ 3 ][   ][   ][   ][ 0 ][   ][   ][   ][   ][   ][   ][   ][   ][   ][   ][ 2 ][   ][   ][   ][ 6 ][   ][?3?][ ? ]
[ ? ][ 2 ][   ][   ][   ][   ][ 5 ][   ][ ? ][   ][   ][<2>][ ? ][ 4 ][   ][   ][   ][   ][   ][   ][   ][ 5 ][   ][   ][   ][   ][ ? ]
[ ? ][   ][?3?][   ][ 2 ][   ][   ][   ][   ][   ][   ][ 1 ][ ? ][   ][   ][|?|][ 6 ][ 5 ][   ][ 3 ][   ][<2>][   ][   ][ 4 ][   ][ ? ]
[ ? ][   ][   ][   ][   ][   ][ 3 ][ ? ][   ][ 2 ][   ][ 2 ][ ? ][   ][   ][   ][   ][   ][   ][   ][   ][   ][   ][   ][   ][ 2 ][ ? ]
[ ? ][ 1 ][   ][   ][ 1 ][   ][ 1 ][   ][   ][   ][   ][   ][ ? ][ ? ][   ][   ][ ? ][   ][ 8 ][   ][   ][   ][ 1 ][   ][   ][   ][ ? ]
[ ? ][   ][   ][   ][   ][   ][   ][   ][   ][   ][ 1 ][   ][   ][<2>][   ][<3>][   ][   ][   ][   ][|5|][   ][   ][   ][   ][   ][ ? ]
[ ? ][ 1 ][   ][   ][   ][ 3 ][ 3 ][   ][ 5 ][   ][   ][   ][   ][   ][   ][   ][<2>][   ][   ][   ][   ][   ][   ][   ][<4>][   ][ ? ]
[ ? ][   ][   ][ 1 ][   ][   ][   ][   ][   ][   ][ 5 ][   ][|2|][ ? ][ ? ][   ][   ][   ][   ][<?>][   ][   ][   ][???][   ][   ][ ? ]
[ ? ][   ][   ][|?|][   ][<2>][ ? ][   ][   ][   ][   ][   ][   ][   ][   ][   ][   ][ 1 ][   ][   ][   ][ 2 ][   ][   ][   ][|?|][ ? ]
[ ? ][ 2 ][   ][   ][   ][ 2 ][   ][   ][ 2 ][ ? ][ 5 ][ 3 ][   ][ 1 ][   ][ 1 ][   ][   ][   ][|5|][   ][   ][   ][   ][   ][   ][ ? ]
[ ? ][   ][   ][<3>][   ][ 2 ][   ][   ][   ][   ][   ][   ][   ][   ][   ][   ][   ][ 2 ][   ][   ][   ][ 6 ][   ][<2>][ 1 ][   ][ ? ]
[ ? ][ 3 ][   ][   ][   ][?4?][   ][ ? ][   ][<3>][   ][   ][   ][   ][ 3 ][   ][   ][   ][   ][?6?][   ][   ][   ][   ][   ][   ][ ? ]
[ ? ][ 1 ][   ][ 4 ][   ][   ][   ][   ][   ][   ][   ][ 3 ][ ? ][   ][   ][   ][|4|][   ][   ][   ][   ][?4?][   ][?4?][   ][|3|][ ? ]
[ ? ][   ][   ][   ][   ][   ][|?|][   ][ 1 ][   ][   ][ 4 ][   ][   ][   ][   ][   ][   ][   ][ 4 ][   ][   ][   ][   ][   ][   ][ ? ]
[ ? ][   ][ 1 ][   ][ 2 ][   ][ 3 ][   ][   ][   ][   ][ 4 ][   ][ 8 ][   ][   ][ 2 ][   ][   ][   ][   ][   ][???][   ][   ][ ? ][ ? ]
[ ? ][   ][   ][   ][   ][   ][   ][   ][|2|][   ][   ][ ? ][   ][   ][   ][   ][   ][   ][ 2 ][   ][?4?][   ][   ][   ][   ][   ][ ? ]
[ ? ][   ][   ][   ][   ][ 4 ][   ][   ][   ][   ][|2|][   ][ 6 ][   ][?3?][   ][   ][   ][   ][   ][   ][   ][<3>][   ][|3|][   ][ ? ]
[ ? ][ 3 ][ 6 ][   ][   ][ 4 ][ 3 ][   ][|2|][   ][   ][   ][   ][   ][   ][   ][ 0 ][   ][   ][<?>][   ][   ][   ][   ][   ][   ][ ? ]
[ ? ][   ][ 3 ][   ][   ][   ][ 2 ][   ][   ][   ][   ][ 2 ][   ][ ? ][ ? ][   ][   ][   ][   ][   ][   ][   ][   ][   ][   ][?2?][ ? ]
[ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ][ ? ]"""

# <2 bytes denote pos><4 bits to denote cnt><2 bits denote modifier><1 bit denotes if cnt is ?><randbit>
outs = []
out_bin = ""
pos = 0
for line in ss.split("\n")[1:]:
    for i in range(0, len(line), 5):
        res_bin = list("0" * 7)
        blk = line[i:i+5]
        if (blk[2] == ' '):
            pos += 1
            continue # add nothing.
        
        if (blk[2] == '?'):
            for j in range(4):
                res_bin[j] = random.choice(["0", "1"])
            res_bin[-1] = '1'
        else:
            assert blk[2] in "012345678"
            x = int(blk[2])
            if x >= 8:
                res_bin[0] = "1" 
                x -= 8
            if x >= 4:
                res_bin[1] = "1"
                x -= 4
            if x >= 2:
                res_bin[2] = "1"
                x -= 2
            if x >= 1:
                res_bin[3] = "1"
                x -= 1
            assert x == 0
        if blk[1] == ' ':
            res_bin = res_bin
        if blk[1] == '|' or blk[1] == '?':
            res_bin[4] = "1"
        if blk[1] == '<' or blk[1] == '?':
            res_bin[5] = "1"
        outs.append(pos.to_bytes(2, "little") + int("".join(res_bin) + random.choice(["0", "1"]), 2).to_bytes(1, "big"))
        pos += 1
    assert pos % 27 == 0
print([i.hex() for i in outs[:10]])
random.shuffle(outs)
out_bin = b''.join(outs)
print(list(out_bin))
print(len(out_bin))